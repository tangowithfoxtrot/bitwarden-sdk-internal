{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["github>bitwarden/renovate-config:non-pinned"],
  "separateMajorMinor": true,
  "enabledManagers": ["cargo", "dockerfile", "github-actions", "gomod", "npm", "nuget"],
  "constraints": {
    "go": "1.21"
  },
  "packageRules": [
    {
      "matchManagers": ["cargo"],
      "matchPackagePatterns": ["pyo3*"],
      "matchUpdateTypes": ["minor", "patch"],
      "groupName": "pyo3 non-major"
    },
    {
      "groupName": "dockerfile minor",
      "matchManagers": ["dockerfile"],
      "matchUpdateTypes": ["minor", "patch"]
    },
    {
      "groupName": "gh minor",
      "matchManagers": ["github-actions"],
      "matchUpdateTypes": ["minor", "patch"]
    },
    {
      "groupName": "go minor",
      "matchManagers": ["gomod"],
      "matchUpdateTypes": ["minor", "patch"]
    }
  ],
  "ignoreDeps": ["dotnet-sdk"],
  // "regexManagers": [
  //   {
  //     "fileMatch": [
  //       "^\\.github/workflows/lint\\.yml$",
  //       "^\\.github/workflows/direct-minimal-versions\\.yml$",
  //       "^\\.github/workflows/minimum-rust-version\\.yml$",
  //       "^\\.github/workflows/rustdoc\\.yml$"
  //     ],
  //     "matchStrings": ["RUST_NIGHTLY_TOOLCHAIN: nightly-(?<version>\\d{4}-\\d{2}-\\d{2})"],
  //     "replaceString": "RUST_NIGHTLY_TOOLCHAIN: nightly-{{newVersion}}",
  //     "datasourceTemplate": "rust-nightly"
  //   }
  // ]
  "regexManagers": [
    {
      "fileMatch": ["(^|/)rust-toolchain\\.toml?$"],
      "matchStrings": [
        "channel\\s*=\\s*\"(?<currentValue>\\d+\\.\\d+(\\.\\d+)?)\""
      ],
      "depNameTemplate": "rust",
      "lookupNameTemplate": "rust-lang/rust",
      "datasourceTemplate": "github-tags"
    }
  ],
  "packageRules": [{
    "matchManagers": ["regex"],
    "matchDepNames": ["rust"],
    "commitMessageTopic": "Rust"
  }]
}
